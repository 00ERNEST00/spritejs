(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{536:function(n,e,t){"use strict";t.r(e),e.default="const {Scene, Sprite, ProtonRenderer} = spritejs;\nconst scene = new Scene('#paper', {\n  viewport: 'auto',\n  resolution: 'flex',\n});\nscene.container.style.background = '#16a085';\n\nconst layer = scene.layer('bglayer', {\n  handleEvent: true,\n  autoRender: false,\n});\n\nconst fglayer = scene.layer('fglayer', {\n  handleEvent: false,\n});\n\nconst logo = new Sprite('https://p0.ssl.qhimg.com/t01a72262146b87165f.png');\nscene.on('resolutionChange', _.debounce((evt) => {\n  logo.attr({\n    pos: layer.center,\n  });\n  main();\n}, 300));\nlogo.attr({\n  anchor: 0.5,\n  pos: layer.center,\n  scale: 0.5,\n});\nfglayer.append(logo);\n\n\nconst proton = new Proton();\nconst R = 280;\nlet pointZone,\n  emitter;\n\nmain();\ntick();\n\nfunction main() {\n  layer.clear();\n  layer.off(['mousedown', 'mouseup', 'mousemove']);\n  const num = Math.min(parseInt(0.5 * layer.resolution[0] / (1000 / 145), 10), 300);\n  createProton(proton, num);\n  setTimeout(addMouseEvent, 200);\n  addRenderer();\n}\n\nfunction createProton(proton, num) {\n  proton.destroy();\n  emitter = new Proton.Emitter();\n  emitter.rate = new Proton.Rate(new Proton.Span(num), new Proton.Span(0.1, 0.4));\n\n  emitter.addInitialize(new Proton.Mass(1));\n  emitter.addInitialize(new Proton.Radius(1, 5));\n  emitter.addInitialize(new Proton.Life(Infinity));\n\n  const [width, height] = layer.resolution;\n  pointZone = new Proton.Position(new Proton.RectZone(0, 0, width, height));\n\n  emitter.addInitialize(pointZone);\n  emitter.addInitialize(new Proton.Velocity(new Proton.Span(1.2, 2.0), new Proton.Span(0, 360), 'polar'));\n\n  emitter.addBehaviour(new Proton.Alpha(Proton.getSpan(0.2, 0.9)));\n  emitter.addBehaviour(new Proton.Color('#ffffff'));\n  emitter.addBehaviour(new Proton.CrossZone(new Proton.RectZone(0, 0, width, height), 'cross'));\n\n  emitter.emit('once');\n  emitter.damping = 0;\n  proton.addEmitter(emitter);\n\n  return proton;\n}\n\nfunction addRenderer() {\n  const renderer = new ProtonRenderer(layer);\n  renderer.onProtonUpdateAfter = function () {\n    const context = layer.context;\n    context.save();\n    const particles = this.parent.emitters[0].particles;\n\n    for(let i = 0; i < particles.length; i++) {\n      for(let j = i + 1; j < particles.length; j++) {\n        const pA = particles[i];\n        const pB = particles[j];\n        const dis = pA.p.distanceTo(pB.p);\n\n        if(dis < R) {\n          const alpha = (1 - dis / R) * 0.5;\n          context.strokeStyle = `rgba(255,255,255,${alpha})`;\n          context.beginPath();\n          context.lineWidth = 2;\n          context.moveTo(pA.p.x, pA.p.y);\n          context.lineTo(pB.p.x, pB.p.y);\n          context.closePath();\n          context.stroke();\n        }\n      }\n    }\n    context.restore();\n  };\n\n  proton.addRenderer(renderer);\n}\n\nfunction addMouseEvent() {\n  emitter.rate = new Proton.Rate(new Proton.Span(3), 0.5);\n  emitter.removeInitialize(pointZone);\n\n  layer.on('mousedown', (e) => {\n    for(let i = 0; i < 3; i++) {\n      emitter.particles[i].dead = true;\n    }\n\n    setTimeout(() => {\n      emitter.p.x = e.x;\n      emitter.p.y = e.y;\n      emitter.emit('once');\n    }, 60);\n  });\n\n  layer.on('mouseup', (e) => {\n    emitter.stop();\n  });\n\n  layer.on('mousemove', (e) => {\n    const p0 = emitter.particles[0];\n    p0.radius = 0;\n\n    const ease = 0.3;\n\n    p0.p.x += (e.x - p0.p.x) * ease;\n    p0.p.y += (e.y - p0.p.y) * ease;\n  });\n}\n\nfunction tick() {\n  requestAnimationFrame(tick);\n  proton.update();\n  proton.stats.update(3);\n}"}}]);